# 戦略 in 予選 （ 2021/2/18 時点 ）

## 流れ
1. FieldをNavigationを利用して，周回しながら壁添付マーカを読み取る
2. 敵をカメラで見つけ次第，敵の方向に向かい，敵添付のマーカを読み取りに行く  

</br>

# 課題 （ 2021/2/18 時点 ）

## *Navigation*
</br>

### 高分解能Mapの生成 (必須)

DefaultのMapは分解能が低くて（ピクセル数が少ない），Navigationで滑らかに周回しようとするとかなりしんどい．  
そのため，**gmapping packageを使って，SLAMを行い，自分たち独自でMapを生成することが必要．**

</br>

### 目標地点の遷移（必須）

どうしても，自己位置推定の精度が悪くなると，特に障害物と壁の間を抜ける際にDeadrockが起きる可能性が高くなる．  
そのため，**一定の時間が経過してもまだ目標地点に到達完了していない場合は，諦めて次の目標地点に移るべき．**  
*結構，到達完了の判定もシビアなので…*

</br>

### Plannerの改良（余裕があれば）

実際に，イケムラがpushしたプログラムを実行してもらえればすぐに分かるが，目標地点に移動する際のPathがかなり安全目に設計されている．  
**特に，壁からかなり離れるように設計されているように思える．**  
この影響で，障害物と壁の間にアプローチする姿勢が結構シビアで抜けにくい．  
**別の動的計画法のアルゴリズムを探すべきかも．**

</br>

### Obstacle Avoidanceの実装（出来ればやりたい）

Costmapをかなり攻めたので，動的障害物である敵ロボットは現状だと避けきれないかもしれない...笑  
なので，別で障害物回避機能を実装したほうが良いはず．  

</br>  

### Recovery Behaviorの改良（余裕があれば）

MoveBaseはDefaultだと，Deadrockが生じて新たなLocal Pathを生成するために，その場回転するアルゴリズムになっている．  
敵に自ロボットのマーカを見せてしまう可能性が高まるので，**その場回転ではなく，Back走行したい．**

</br>  

## *Camera*

### cameraを使って敵までの距離と角度を検知
敵バルーンは赤色なのでカメラで見ている画像から赤色を抽出し、敵の視認が可能。
バルーンの大きさで敵までの距離が算出できるはず

<br>

バルーンの大きさは単純な赤色のピクセル数ではなく、赤色領域の最小外接円の半径で定義する。（ピクセル数だと障害物と重なった時や視野の端っこに来た時にバルーンが欠けて見えるため、敵までの距離を見誤る）
